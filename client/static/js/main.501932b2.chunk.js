(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e,t){},134:function(e,t){},185:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),s=n(76),o=n.n(s),i=(n(88),n(77));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(i.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},77:function(e,t,n){"use strict";(function(e){var a=n(78),r=n(79),s=n(81),o=n(80),i=n(82),c=n(2),l=n.n(c),u=(n(92),n(94)),m=n(41),p=n(180),d="http://localhost:8000/",f=function(t){function n(t){var r;return Object(a.a)(this,n),(r=Object(s.a)(this,Object(o.a)(n).call(this,t)))._handlePassword=function(e){r.setState({password:e.target.value})},r._verifyPassword=function(e){e.preventDefault();var t={password:u(r.state.password)};fetch(d+"verify/",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(e){200===e.status?e.json().then(function(e){r.setState({token:e.token,verified:!0})}).catch(function(e){console.error(e)}):console.error("Incorrect password")}).catch(function(e){console.error(e)})},r._enterPasswordUI=function(){return l.a.createElement("form",{onSubmit:r._verifyPassword},l.a.createElement("input",{type:"password",value:r.state.password,placeholder:"Enter password",onChange:r._handlePassword}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Enter"}))},r._generateKeys=function(e){e.preventDefault();var t=m.createECDH("secp521r1");t.generateKeys();var n=t.getPrivateKey("hex"),a=t.getPublicKey("hex"),s=p(t,"secp521r1");r.setState({keysGenerated:!0,publicKey:a,privateKey:n,pem:s})},r._submitKey=function(e){e.preventDefault();var t=r.state.pem.encodePublicKey(),n={token:r.state.token,key:t};fetch(d+"store/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){200===e.status?r.setState({ready:!0}):console.error(e.status)}).catch(function(e){console.error(e)})},r._handleMessage=function(e){r.setState({message:e.target.value})},r._generateKeysUI=function(){var e;return r.state.keysGenerated&&(e=l.a.createElement("div",null,l.a.createElement("div",null,"Pub key: ",r.state.publicKey),l.a.createElement("div",null,"Priv key: ",r.state.privateKey),l.a.createElement("form",{onSubmit:r._submitKey},l.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Share"})))),l.a.createElement("div",null,l.a.createElement("form",{onSubmit:r._generateKeys},l.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Generate keys"})),e)},r._submitMessage=function(t){t.preventDefault();var n=e.from(r.state.message),a=m.createSign("sha256");a.update(n);var s={message:n,sig:a.sign(r.state.pem.encodePrivateKey()),key:r.state.pem.encodePublicKey()};fetch(d+"talk/",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then(function(e){200===e.status?console.log("Successfully received"):console.error(e.status)}).catch(function(e){console.error(e)})},r._submitMessageUI=function(){return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:r._submitMessage},l.a.createElement("textarea",{value:r.state.message,placeholder:"Enter message",onChange:r._handleMessage}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Submit"})))},r.state={password:"",verified:!1,keysGenerated:!1,publicKey:"",privateKey:"",ready:!1,token:null,pem:null},r}return Object(i.a)(n,t),Object(r.a)(n,[{key:"render",value:function(){var e,t=this.state.verified,n=this.state.ready;return e=t?n?this._submitMessageUI():this._generateKeysUI():this._enterPasswordUI(),l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("div",null,e)))}}]),n}(c.Component);t.a=f}).call(this,n(3).Buffer)},83:function(e,t,n){e.exports=n(185)},88:function(e,t,n){},92:function(e,t,n){},96:function(e,t){},98:function(e,t){}},[[83,2,1]]]);
//# sourceMappingURL=main.501932b2.chunk.js.map